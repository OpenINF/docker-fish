// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/openinf/docker-fisher/tree/main/templates/centos7
{
	"name": "CentOS",

    "build": {
        // Path is relative to the devcontainer.json file.
        "dockerfile": "Dockerfile"
    },

	"runArgs": [ // TODO(DerekNonGeneric): determine whether these args are necessary
		"--cap-add=SYS_ADMIN",
		"--security-opt",
		"seccomp=unconfined"
	],

	// Use 'forwardPorts' to make a list of ports inside the container available
	// locally.
	"forwardPorts": [
		// Jekyll server
		4000,
		// Live reload server
		35729,
		// OpenSSH server
		2222
	],


	// Configure tool-specific properties.
	"customizations": {
		// Configure properties specific to VS Code.
		"vscode": {
			// Set *default* container-specific settings.json values on container
			// create.
			"settings": {
				"terminal.integrated.profiles.linux": {
					"fish": {
						"path": "fish"
					}
				}
			},
			"terminal.integrated.defaultProfile.linux": "bash"
		  },
		// Add the IDs of extensions you want installed when the container is created.
		"extensions": [
			// https://marketplace.visualstudio.com/items?itemName=aaron-bond.better-comments
			"aaron-bond.better-comments",
			// https://marketplace.visualstudio.com/items?itemName=bmalehorn.vscode-fish
			"bmalehorn.vscode-fish",
			// https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker
			"ms-azuretools.vscode-docker",
			// https://marketplace.visualstudio.com/items?itemName=DavidAnson.vscode-markdownlint
			"davidanson.vscode-markdownlint",
			// https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint
			// "dbaeumer.vscode-eslint",
			// https://marketplace.visualstudio.com/items?itemName=dprint.dprint
			"dprint.dprint",
			// https://marketplace.visualstudio.com/items?itemName=editorconfig.editorconfig
			"editorconfig.editorconfig",
			// https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode
			"esbenp.prettier-vscode",
			// https://marketplace.visualstudio.com/items?itemName=Gruntfuggly.todo-tree
			"Gruntfuggly.todo-tree",
			// https://marketplace.visualstudio.com/items?itemName=KatjanaKosic.vscode-json5
			"KatjanaKosic.vscode-json5",
			// https://marketplace.visualstudio.com/items?itemName=mads-hartmann.bash-ide-vscode
			"mads-hartmann.bash-ide-vscode",
			// https://marketplace.visualstudio.com/items?itemName=streetsidesoftware.code-spell-checker
			"streetsidesoftware.code-spell-checker",
			// https://marketplace.visualstudio.com/items?itemName=tamasfe.even-better-toml
			"tamasfe.even-better-toml",
			// https://marketplace.visualstudio.com/items?itemName=timonwong.shellcheck
			"timonwong.shellcheck",
			// https://marketplace.visualstudio.com/items?itemName=unifiedjs.vscode-remark
			"unifiedjs.vscode-remark"
		]
	  },

	  "overrideCommand": false,
	  // Use 'postCreateCommand' to run commands after the container is created.
	  "postCreateCommand": "fish .devcontainer/post-create.fish",
	  "remoteEnv": {
		"PATH": "${containerEnv:PATH}:~/.rbenv/shims/"
	  },

	"hostRequirements": {
		"cpus": 4
	}

	// Uncomment to connect as root instead. More info: https://aka.ms/dev-containers-non-root.
	// "remoteUser": "root"
}
